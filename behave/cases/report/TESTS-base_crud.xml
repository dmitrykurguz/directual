<testsuite errors="0" failures="0" name="base_crud.API base CRUD" skipped="0" tests="3" time="0.351911"><testcase classname="base_crud.API base CRUD" name="выполняются предусловия для тестирования API" status="passed" time="0.003314"><system-out>
<![CDATA[
@scenario.begin
  Сценарий: выполняются предусловия для тестирования API
    Если есть кешированое значение cookie с именем sessionid ... passed in 0.003s
    Если указаны app_id и app_secret ... passed in 0.000s

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
filename for search: cookie.sessionid.pickle
screenshot-2017-10-31_11-48-37.png
.DS_Store
bin
screenshot-2017-10-31_20-58-17.png
features
screenshot-2017-10-31_21-05-03.png
behave.ini
cookie.sessionid.pickle

]]>
</system-out></testcase><testcase classname="base_crud.API base CRUD" name="создание тестовой структуры, добавление полей" status="passed" time="0.216676"><system-out>
<![CDATA[
@scenario.begin

  @wip
  Сценарий: создание тестовой структуры, добавление полей
    Допустим работает шаг "Если есть кешированое значение cookie с именем sessionid" ... passed in 0.003s
    И отправляем авторизованный запрос на "/good/api/v3/object/filters/" ... passed in 0.094s
      """
      {"sysName":"dog",
      "name":"dog","id":"0","parentID":"0","fastCreate":false,"fastCreatePayload":"","sourceSysName":"","action":"create"}
      """
    К тому же отправляем авторизованный запрос на "/good/api/v3/object/structure/" ... passed in 0.119s
      """
      {"filterName":"dog",
      "structure":[
        {"sysName":"id","name":"id","dataType":"id","id":"0","link":"","group":"","tags":"","indexing":false,"ordering":false,"linkIndexFieldSysName":[]},
        {"isEditMode":true,"isNew":true,"id":1509100441582,"sysName":"fieldName","name":"fieldName","dataType":"string","link":"","linkIndexFieldSysName":[""]}
      ]}
      """

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
execute step Если есть кешированое значение cookie с именем sessionid
filename for search: cookie.sessionid.pickle
screenshot-2017-10-31_11-48-37.png
.DS_Store
bin
screenshot-2017-10-31_20-58-17.png
features
screenshot-2017-10-31_21-05-03.png
behave.ini
cookie.sessionid.pickle
filename for search: cookie.sessionid.pickle
screenshot-2017-10-31_11-48-37.png
.DS_Store
bin
screenshot-2017-10-31_20-58-17.png
features
screenshot-2017-10-31_21-05-03.png
behave.ini
cookie.sessionid.pickle
request http://web_ui:8080/good/api/v3/object/filters/?sessionid=582d3f1f-158f-4d5f-8969-abb2b436a0fa with sessionId
status: {"msg":"sysName already have!","code":0,"status":"ERROR"} - 
200
filename for search: cookie.sessionid.pickle
screenshot-2017-10-31_11-48-37.png
.DS_Store
bin
screenshot-2017-10-31_20-58-17.png
features
screenshot-2017-10-31_21-05-03.png
behave.ini
cookie.sessionid.pickle
request http://web_ui:8080/good/api/v3/object/structure/?sessionid=582d3f1f-158f-4d5f-8969-abb2b436a0fa with sessionId
status: {"result":{"viewId":[],"globalStructureID":[{"key":"WebComponent","value":"WebComponent"},{"key":"WebPage","value":"WebPage"},{"key":"TMessageOut","value":"TMessageOut"},{"key":"MailLog","value":"MailLog"},{"key":"SystemMessage","value":"SystemMessage"},{"key":"FileUpload","value":"FileUpload"},{"key":"TMessageIn","value":"TMessageIn"},{"key":"IncomingMessage","value":"IncomingMessage"},{"key":"TKeyboard","value":"TKeyboard"},{"key":"ImportInformation","value":"ImportInformation"},{"key":"WebUserSession","value":"WebUserSession"},{"key":"WebApplication","value":"WebApplication"},{"key":"SmsLog","value":"SmsLog"},{"key":"TChat","value":"TChat"},{"key":"TUser","value":"TUser"},{"key":"WebUser","value":"WebUser"},{"key":"dog","value":"dog"},{"key":"SocialUser","value":"SocialUser"}],"structureFilters":[],"groups":[],"structure":[{"sysName":"id","dataType":"id","name":"id","id":"0","link":"","group":"","tags":"","indexing":false,"ordering":false,"linkIndexFieldSysName":[]},{"sysName":"fieldName","dataType":"string","name":"fieldName","id":"1509100441582","link":"","group":"","tags":"","indexing":false,"ordering":false,"linkIndexFieldSysName":[""]}],"settings":{"inMemory":false,"isCacheable":false,"timeCache":0,"indexEnabled":false,"lowPriority":false}},"status":"OK"} - 
200

]]>
</system-out></testcase><testcase classname="base_crud.API base CRUD" name="сохранение объекта структуры и поиск его" status="passed" time="0.131922"><system-out>
<![CDATA[
@scenario.begin

  @wip
  Сценарий: сохранение объекта структуры и поиск его
    Допустим работает шаг "Если указаны app_id и app_secret" ... passed in 0.001s
    Если сохраняем объект структуры "dog" ... passed in 0.050s
      """
      {
          "id": "42",
          "fieldName": "Chubaka"
      }
      """
    То существует объект структуры "dog" с id "42" ... passed in 0.019s
    И объект структуры "dog" имеет поля ... passed in 0.063s
      """
      {
          "filter": 
              {"filters":[{"operator":"AND","field":"id","value":"42","exp":"=="}],"fetch":"","fields":"","pageSize":10,"page":0,"ref":"","allObjects":true,"orders":[]}
          ,
          "assert": {
              "id": "42",
              "fieldName": "Chubaka"
          }
      }
      """

@scenario.end
--------------------------------------------------------------------------------

Captured stdout:
execute step Если указаны app_id и app_secret
use app_id test_app_id and app_secret test_app_secret_12!@
call: http://web_ui:8080/good/api/v3/struct/dog/?appID=test_app_id&appSecret=test_app_secret_12!@
status: {"result":{"insert":0,"obj":null,"savedIDs":["42"],"update":1,"lastObjectID":"42"},"status":"OK"} - 
200
use app_id test_app_id and app_secret test_app_secret_12!@
call: http://web_ui:8080/good/api/v3/struct/dog/search/?appID=test_app_id&appSecret=test_app_secret_12!@
status: {"result":{"list":[{"obj":{"id":"42","fieldName":"Chubaka"},"sid":4,"objectID":"42","dateCreated":"2017-10-31T21:05:35Z","dateChanged":"2017-11-02T08:25:10Z","viewLink":{},"fetch":{},"version":0}],"pageInfo":{"currentPage":0,"pageSize":10,"totalPage":1,"tableSize":1,"currentPageSize":1}},"status":"OK"} - 
200
looking dog with filters: {'filters': [{'operator': 'AND', 'field': 'id', 'value': '42', 'exp': '=='}], 'fetch': '', 'fields': '', 'pageSize': 10, 'page': 0, 'ref': '', 'allObjects': True, 'orders': []}
call: http://web_ui:8080/good/api/v3/struct/dog/search/?appID=test_app_id&appSecret=test_app_secret_12!@
status: {"result":{"list":[{"obj":{"id":"42","fieldName":"Chubaka"},"sid":4,"objectID":"42","dateCreated":"2017-10-31T21:05:35Z","dateChanged":"2017-11-02T08:25:10Z","viewLink":{},"fetch":{},"version":0}],"pageInfo":{"currentPage":0,"pageSize":10,"totalPage":1,"tableSize":1,"currentPageSize":1}},"status":"OK"} - 
200
item = {'id': '42', 'fieldName': 'Chubaka'}
{'id': '42', 'fieldName': 'Chubaka'}

]]>
</system-out></testcase></testsuite>